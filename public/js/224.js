"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[224],{224:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var r=n(669),a=n.n(r);const i={props:{objectCar:Object},mounted:function(){},data:function(){return{}},methods:{editCar:function(){this.$emit("editCar")}}};var o=n(900);const s={components:{CardInfo:(0,o.Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"m-3",attrs:{"max-width":"300"}},[n("v-img",{staticClass:"white--text align-end",attrs:{height:"200px",src:"https://images.pexels.com/photos/112460/pexels-photo-112460.jpeg?auto=compress&cs=tinysrgb&dpr=1&w=500"}},[n("v-card-title",[t._v(t._s(t.objectCar.name))])],1),t._v(" "),n("v-card-subtitle",{staticClass:"pb-0"},[t._v("\n    "+t._s(t.objectCar.price)+"\n  ")]),t._v(" "),n("v-card-text",{staticClass:"text--primary"},[n("div",[t._v(t._s(t.objectCar.brand))]),t._v(" "),n("div",[t._v(t._s(t.objectCar.model)+", "+t._s(t.objectCar.year))])]),t._v(" "),n("v-card-actions",{staticStyle:{"justify-content":"end"}},[n("v-btn",{attrs:{color:"orange",text:""},on:{click:t.editCar}},[t._v("\n      Editar\n    ")])],1)],1)}),[],!1,null,null,null).exports},data:function(){return{valid:!0,nameInput:"",nameRules:[function(t){return!!t||"El nombre es requerido"},function(t){return t&&t.length<=25||"El nombre debe ser menor de 25 carácteres"}],priceInput:null,priceRules:[function(t){return!!t||"El precio es requerido"}],brandInput:null,modelInput:null,yearInput:null,cars:[],brands:[],models:[],years:[],loading:!1,dataCar:[],isEditing:!1,iddToEdit:null}},mounted:function(){this.getBrands(),this.getModelAndYear(),this.getInfo()},methods:{validate:function(){this.$refs.form.validate()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()},getBrands:function(){var t=this;this.loading=!0,a().get("http://private-anon-655fb31478-carsapi1.apiary-mock.com/manufacturers").then((function(e){e.data.forEach((function(e){t.brands.push(e.name)}))})).catch((function(t){console.error(t)}))},getModelAndYear:function(){var t=this;a().get("https://private-anon-655fb31478-carsapi1.apiary-mock.com/cars").then((function(e){e.data.forEach((function(e){t.models.push(e.model),t.years.push(e.year)}))})).catch((function(t){console.error(t)}))},saveInfo:function(){var t=this;if(!this.validate()){var e={name:this.nameInput,price:this.priceInput,brand:this.brandInput,model:this.modelInput,year:this.yearInput},n=this.isEditing?"/api/update-car/id/".concat(this.iddToEdit):"/api/save-car";a().post(n,e).then((function(e){t.reset(),t.resetValidation(),t.dataCar.splice(0,0,e.data.car),t.isEditing&&location.reload(),window.scrollTo({top:document.getElementById("allCars").offsetTop,left:0,behavior:"smooth"}),t.isEditing=!1})).catch((function(t){console.error(t)}))}},deleteInfo:function(){a().delete("/api/delete-car/".concat(this.iddToEdit)).then((function(t){location.reload()})).catch((function(t){console.error(t)}))},updateInfo:function(){a().post("/api/update-car").then((function(t){})).catch((function(t){console.error(t)}))},getInfo:function(){var t=this;a().get("/api/list-cars").then((function(e){t.dataCar=e.data.cars})).catch((function(t){console.error(t)}))},fillForm:function(t){t.id&&(this.iddToEdit=t.id),this.nameInput=t.name,this.priceInput=t.price,this.brandInput=t.brand,this.modelInput=t.model,this.yearInput=t.year,window.scrollTo({top:document.getElementById("initId").offsetTop,left:0,behavior:"smooth"}),this.isEditing=!0}},computed:{}};const c=(0,o.Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"initId"}},[n("h1",{staticStyle:{"text-align":"center"}},[t._v("Auto D")]),t._v(" "),n("h3",{staticStyle:{"text-align":"center"}},[t._v("Agrega tu carro")]),t._v(" "),n("v-card",{staticClass:"mx-auto p-5",attrs:{width:"600"}},[n("v-form",{ref:"form",attrs:{width:"600"},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{counter:25,rules:t.nameRules,label:"Nombre",required:""},model:{value:t.nameInput,callback:function(e){t.nameInput=e},expression:"nameInput"}}),t._v(" "),n("v-text-field",{attrs:{rules:t.priceRules,label:"Precio",type:"number",counter:25,required:""},model:{value:t.priceInput,callback:function(e){t.priceInput=e},expression:"priceInput"}}),t._v(" "),n("v-select",{attrs:{items:t.brands,rules:[function(t){return!!t||"Item is required"}],label:"Marca",required:""},model:{value:t.brandInput,callback:function(e){t.brandInput=e},expression:"brandInput"}}),t._v(" "),n("v-select",{attrs:{items:t.models,rules:[function(t){return!!t||"Item is required"}],label:"Modelo",required:""},model:{value:t.modelInput,callback:function(e){t.modelInput=e},expression:"modelInput"}}),t._v(" "),n("v-select",{attrs:{items:t.years,rules:[function(t){return!!t||"Item is required"}],label:"Año",required:""},model:{value:t.yearInput,callback:function(e){t.yearInput=e},expression:"yearInput"}}),t._v(" "),n("v-btn",{staticClass:"mr-4",attrs:{color:"success"},on:{click:t.saveInfo}},[t._v("\n          Guardar\n        ")]),t._v(" "),t.isEditing?n("v-btn",{staticClass:"mr-4",attrs:{color:"error"},on:{click:t.deleteInfo}},[t._v("\n          Eliminar\n        ")]):t._e(),t._v(" "),t.isEditing?n("v-btn",{attrs:{color:"warning"},on:{click:function(e){t.reset(),t.isEditing=!1}}},[t._v("\n         Cancelar\n        ")]):t._e()],1)],1),t._v(" "),n("div",{staticClass:"my-10",staticStyle:{display:"flex","flex-wrap":"wrap","justify-content":"center"},attrs:{id:"allCars",height:"auto"}},t._l(t.dataCar,(function(e){return n("CardInfo",{key:e.id,attrs:{objectCar:e},on:{editCar:function(n){return t.fillForm(e)}}})})),1)],1)}),[],!1,null,null,null).exports}}]);